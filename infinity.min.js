class InfinityScroll{constructor(t,e,s,l,r={}){this.last_view=0,this.count=0,this.amount=l,this.observer=new IntersectionObserver(e=>{let s=new Date,l=0;l=null==this.last_view?1e3:s-this.last_view,this.last_view=s,console.log("see"),!0===e[0].isIntersecting&&l>=1e3&&(this.observer.unobserve(document.querySelector(`#${t}`)),this.ServerCall())},{threshold:[0]}),this.url=e,this.callback=s,this.target_element=t,this.observer.observe(document.querySelector(`#${t}`)),this.post_data=r}GenerateElements(t){let e=JSON.parse(t);console.log(this);let s=$(`#${this.target_element}`);for(let l of e)this.count++,s.before(this.callback(l));e.length>0&&this.observer.observe(document.querySelector(`#${this.target_element}`))}ServerCall(){let t=this.GenerateElements.bind(this);$.ajax({url:this.url,dataType:"JSON",method:"POST",data:{count:this.count,amount:this.amount,...this.post_data},success:function(e){t(e)}})}}