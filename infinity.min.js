class InfinityScroll{constructor(e,t,s,l,i={}){this.last_view=0,this.count=0,this.amount=l,this.observer=new IntersectionObserver(t=>{let s=new Date,l=0;l=null==this.last_view?1e3:s-this.last_view,this.last_view=s,console.log("see"),!0===t[0].isIntersecting&&l>=1e3&&(this.observer.unobserve(document.querySelector(`#${e}`)),this.ServerCall())},{threshold:[0]}),this.url=t,this.callback=s,this.target_element=e,this.observer.observe(document.querySelector(`#${e}`)),this.post_data=i,this.element_display=$(`#${e}`).css("display")}GenerateElements(e){let t=JSON.parse(e);console.log(this);let s=$(`#${this.target_element}`);for(let l of t)this.count++,s.before(this.callback(l));t.length>0&&(this.observer.observe(document.querySelector(`#${this.target_element}`)),$(`#${this.target_element}`).css("display","none"))}ServerCall(){let e=this.GenerateElements.bind(this);$(`#${this.target_element}`).css("display",this.element_display),$.ajax({url:this.url,dataType:"JSON",method:"POST",data:{count:this.count,amount:this.amount,...this.post_data},success:function(t){$(`#${this.target_element}`).css("display","none"),e(t)}})}}